<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">

<dom-module id="ww-app">
  <template>
    <style>
    :host {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;

        display: flex;

        flex-flow: column nowrap;
        align-items: center;

        font-family: Roboto;
      }
      * {

        box-sizing:border-box;
      }
      card {
        font-size: 40px;
      }

      button {
        font-size: 40px;
      }
      #suggestions {
        display: flex;
        height: 70px;
      }

      #working-set {
        display: flex;
        height: 70px;
      }

      .tile {
        width: 70px;
        height: 70px;
        text-transform: uppercase;
      }

      .slot {
        border: 1px solid black;
        width: 70px;
        height: 70px;
      }

      .box {
        position: absolute;
        border: 1px solid grey;
        text-transform: uppercase;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #answers {
        position: relative;

        font-size: 20px;

        border: 1px solid grey;

        align-self: stretch;
        flex: 1;
      }
</style>
    <div class="card" id="scoreboard">
      <label>Score: </label><span>[[score]]</span>
      <label>Time left: </label><span>[[time]]</span>
    </div>

    <div hidden="[[!showRoundOver]]">
      Round Over!
      <button on-click="nextRound">Next Round</button>
    </div>

    <div hidden="[[!showGameOver]]">
      Game Over!
      <button on-click="newGame">New Game</button>
    </div>

    <div>
      <div id="suggestions">
        <template is="dom-repeat" items="[[suggestions]]">
          <button class="tile" on-click="select">[[item.letter]]</button>
        </template>
      </div>
      <div id="working-set">
        <template is="dom-repeat" items="[[available]]">
          <button class="tile" on-click="select">[[item.letter]]</button>
        </template>
      </div>
      <div class="card">
        <button on-click="backspace">Back</button>
        <button on-click="_submit">Submit</button>
        <button on-click="_shuffle">Shuffle</button>
        <span hidden$="[[!wrong]]">Wrong</span>
      </div>
    </div>

    <div id="answers">
      <template is="dom-repeat" items="[[answers]]" as="answer" index-as="answerIdx">
        <template is="dom-repeat" items="[[lettersOf(answer.word)]]" as="letter" index-as="letterIdx">
          <div class="box" style$="[[styleOf(answerIdx, letterIdx)]]"><span hidden$="[[answer.hidden]]">[[letter]]</span></div>
        </template>
      </template>
    </div>
  </template>

  <!-- TODO: Just import the Lodash stuff I need -->
  <script src="../../bower_components/lodash/lodash.js"></script>
  <script type="module" src="view.js"></script>
</dom-module>
